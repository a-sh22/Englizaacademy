<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ø®ØªØ¨Ø§Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø³ØªÙˆÙ‰</title>

<style>
*{box-sizing:border-box;font-family:system-ui,-apple-system,"Segoe UI",Tahoma}
body{
  margin:0;background:#f3f6f2;min-height:100vh;
  display:flex;align-items:center;justify-content:center
}
.container{
  width:420px;background:#fff;border-radius:24px;padding:28px;
  box-shadow:0 20px 45px rgba(0,0,0,.1);text-align:center
}
.hidden{display:none}
h1,h2{color:#2b2b2b}
p{color:#555;line-height:1.6}
button{
  width:100%;padding:14px;border-radius:14px;border:none;
  font-size:16px;cursor:pointer;margin-top:14px
}
.primary{background:#4CAF50;color:#fff}
.secondary{background:#f1f1f1;color:#333}
button:disabled{background:#cfe8d0;cursor:not-allowed}
.progress{height:6px;background:#e0e0e0;border-radius:6px;overflow:hidden;margin-bottom:18px}
.progress-bar{height:100%;width:0;background:#4CAF50;transition:.3s}
.options button{background:#f4f4f4;color:#333;margin:8px 0}
.options button.selected{background:#4CAF50;color:#fff}
audio{width:100%;margin:14px 0}
.earlo{font-size:64px;animation:breathe 4s infinite}
@keyframes breathe{0%{transform:scale(1)}50%{transform:scale(1.04)}100%{transform:scale(1)}}
.confetti{font-size:28px;animation:pop .8s ease-out}
@keyframes pop{from{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}
</style>
</head>

<body>
<div class="container">

<!-- INTRO -->
<div id="intro">
  <div class="earlo">ğŸ°</div>
  <h1>Ø®Ù„Ù‘ÙŠÙ†Ø§ Ù†Ø¹Ø±Ù Ù…Ø³ØªÙˆØ§Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ</h1>
  <p>Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ø³ÙŠØ· (5â€“7 Ø¯Ù‚Ø§Ø¦Ù‚)<br>Ø¨Ø¯ÙˆÙ† ØªÙˆØªØ±ØŒ Ø¨Ø¯ÙˆÙ† ØªØ¹Ù‚ÙŠØ¯</p>
  <button class="primary" onclick="startTest()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
</div>

<!-- QUIZ -->
<div id="quiz" class="hidden">
  <div class="progress"><div class="progress-bar" id="progressBar"></div></div>
  <h2 id="questionText"></h2>
  <div id="audioBox"></div>
  <div class="options" id="options"></div>
  <button id="nextBtn" class="primary" onclick="nextQuestion()" disabled>Ø§Ù„ØªØ§Ù„ÙŠ</button>
</div>

<!-- RESULT -->
<div id="result" class="hidden">
  <div class="confetti">ğŸ‰ğŸ‰ğŸ‰</div>
  <div class="earlo">ğŸ°</div>
  <h2 id="levelText"></h2>
  <p id="resultText"></p>
  <button class="secondary" id="freeBtn">ğŸ“˜ Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ù…ÙƒØ§Ù† Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ùƒ</button>
  <button class="primary" onclick="location.href='buy.html'">ğŸš€ Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„</button>
</div>

</div>

<audio id="clickSound"><source src="click.mp3" type="audio/mpeg"></audio>

<script>
const questions = [
  // 1
  { q:"Choose the correct sentence:",
    options:["She donâ€™t like coffee","She doesnâ€™t like coffee","She not like coffee","She didnâ€™t likes coffee"],
    correct:1
  },
  // 2
  { q:"Yesterday at 7 PM, I ___ dinner.",
    options:["eat","am eating","was eating","have eaten"],
    correct:2
  },
  // 3
  { q:"What does this sentence mean?\nâ€œIâ€™ve lived here for five years.â€",
    options:[
      "I lived here before but not now",
      "I live here now and started 5 years ago",
      "I will live here for five years",
      "I only lived here in the past"
    ],
    correct:1
  },
  // 4
  { q:"When I called him, he ___ a shower.",
    options:["takes","took","was taking","has taken"],
    correct:2
  },
  // 5 (Listening 1)
  { q:"Listening:",
    audio:"audio1.mp3",
    options:["He called already","He forgot to call","He didnâ€™t want to call","He will call later"],
    correct:1
  },
  // 6
  { q:"Choose the correct sentence:",
    options:[
      "I donâ€™t know what does he want",
      "I donâ€™t know what he wants",
      "I donâ€™t know what he want",
      "I donâ€™t know what wants he"
    ],
    correct:1
  },
  // 7
  { q:"Choose the correct option:",
    options:[
      "I didnâ€™t have money enough",
      "I didnâ€™t have enough money",
      "I didnâ€™t have very money",
      "I didnâ€™t have too money"
    ],
    correct:1
  },
  // 8
  { q:"What does this sentence mean?\nâ€œShe used to work here.â€",
    options:[
      "She works here now",
      "She will work here",
      "She worked here before but not now",
      "She is working here now"
    ],
    correct:2
  },
  // 9
  { q:"Choose the correct sentence:",
    options:[
      "He told me where is the station",
      "He told me where the station is",
      "He told me where was the station",
      "He told me where the station was is"
    ],
    correct:1
  },
  // 10
  { q:"By the time I arrived, they ___",
    options:["left","have left","had left","were leaving"],
    correct:2
  },
  // 11 (Listening 2)
  { q:"Listening:",
    audio:"audio2.mp3",
    options:[
      "She hasnâ€™t finished yet",
      "She finished a long time ago",
      "She is finishing now",
      "She will finish later"
    ],
    correct:0
  },
  // 12
  { q:"Choose the most natural sentence:",
    options:["I am agree with you","I agree with you","I am agreeing with you always","I agree you"],
    correct:1
  }
];

let current=0, score=0;
const intro=document.getElementById("intro");
const quiz=document.getElementById("quiz");
const result=document.getElementById("result");
const questionText=document.getElementById("questionText");
const options=document.getElementById("options");
const audioBox=document.getElementById("audioBox");
const nextBtn=document.getElementById("nextBtn");
const progressBar=document.getElementById("progressBar");
const levelText=document.getElementById("levelText");
const resultText=document.getElementById("resultText");
const freeBtn=document.getElementById("freeBtn");
const clickSound=document.getElementById("clickSound");

function startTest(){
  intro.classList.add("hidden");
  quiz.classList.remove("hidden");
  loadQuestion();
}
function loadQuestion(){
  const q=questions[current];
  questionText.innerText=q.q;
  options.innerHTML=""; audioBox.innerHTML="";
  nextBtn.disabled=true;
  if(q.audio){
    audioBox.innerHTML=`<audio controls><source src="${q.audio}" type="audio/mpeg"></audio>`;
  }
  q.options.forEach((opt,i)=>{
    const b=document.createElement("button");
    b.textContent=opt;
    b.onclick=()=>selectAnswer(b,i);
    options.appendChild(b);
  });
  progressBar.style.width=((current+1)/questions.length*100)+"%";
}
function selectAnswer(btn,i){
  clickSound.play();
  document.querySelectorAll(".options button").forEach(b=>b.classList.remove("selected"));
  btn.classList.add("selected"); btn.dataset.answer=i;
  nextBtn.disabled=false;
}
function nextQuestion(){
  const sel=document.querySelector(".selected");
  if(parseInt(sel.dataset.answer)===questions[current].correct) score++;
  current++; current<questions.length ? loadQuestion() : showResult();
}
function showResult(){
  quiz.classList.add("hidden"); result.classList.remove("hidden");
  let level,msg,link;
  if(score<=4){ level="Ù…Ø¨ØªØ¯Ø¦ Ø­Ù‚ÙŠÙ‚ÙŠ"; msg="Ø¨Ø¯Ø§ÙŠØ© Ù…Ù…ØªØ§Ø²Ø©. Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³Ø§Ø± Ù…Ù†Ø§Ø³Ø¨ Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø£Ø³Ø§Ø³ Ø®Ø·ÙˆØ© Ø¨Ø®Ø·ÙˆØ©."; link="free-a1.html";}
  else if(score<=8){ level="Ø£Ø³Ø§Ø³ÙŠØ§Øª"; msg="Ø¹Ù†Ø¯Ùƒ Ø£Ø³Ø§Ø³ Ø¬ÙŠØ¯ ÙˆÙ†Ù‚Ø¯Ø± Ù†Ø·ÙˆØ±Ù‡ ÙˆÙ†Ø±ØªØ¨Ù‡."; link="free-a2.html";}
  else{ level="Ù…ØªÙˆØ³Ø·"; msg="Ù…Ø³ØªÙˆÙ‰ Ù…Ù…ØªØ§Ø²ØŒ ÙŠØ­ØªØ§Ø¬ ØµÙ‚Ù„ ÙˆØªÙ†Ø¸ÙŠÙ…."; link="free-b1.html";}
  levelText.innerText="Ù…Ø³ØªÙˆØ§Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: "+level;
  resultText.innerText=msg;
  freeBtn.onclick=()=>location.href=link;
}
</script>
</body>
</html>
